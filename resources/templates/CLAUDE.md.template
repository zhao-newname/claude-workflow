# 项目开发规范

<!-- CW_PRESET_START -->
<!-- Version: 1.2.0 -->
<!--
  ⚠️ 注意：此部分为 Claude Workflow 预设规范
  - 标记之间的内容由 cw init 自动管理
  - 如需自定义规范，请在下方"项目自定义规范"部分添加
  - 修改此部分内容后，再次执行 cw init 可能会被覆盖
-->

## 🔄 任务恢复协议

### 触发词识别

当用户说以下内容时，立即启动任务恢复流程：
- "继续上次的工作" / "继续" / "继续工作"
- "resume" / "恢复工作" / "恢复"
- "接着做" / "从哪里开始？"
- "读取文档" / "查看任务" / "读取任务"

### 可视化执行流程

**重要**：执行任务恢复时，必须输出清晰的步骤说明，让用户看到执行过程。

**标准输出格式**：
```
🔍 检测到任务恢复请求，开始加载...

📂 读取 .claude/ACTIVE_TASK.md...
   ✅ 找到活跃任务: [任务名称]

📋 读取任务上下文 ([任务名]-context.md)...
   ✅ 已加载上下文信息

📝 读取任务清单 ([任务名]-tasks.md)...
   ✅ 已加载任务清单

📊 任务状态：
   - 完成度: XX%
   - 上次更新: YYYY-MM-DD
   - 当前进度: [简要说明]

✨ 准备就绪，继续工作...
```

### 执行步骤

1. **输出开始提示** - 告诉用户正在加载任务
   ```
   🔍 检测到任务恢复请求，开始加载...
   ```

2. **读取 ACTIVE_TASK.md** - 使用 Read 工具读取 `.claude/ACTIVE_TASK.md`
   ```
   📂 读取 .claude/ACTIVE_TASK.md...
   ```
   - 如果文件不存在，提示用户没有活跃任务
   - 如果文件存在，从中提取任务名称和文件路径

3. **读取 context.md** - 根据 ACTIVE_TASK.md 中的路径读取上下文文件
   ```
   📋 读取任务上下文 (dev/active/[任务名]/[任务名]-context.md)...
   ```
   - 使用完整的文件路径
   - 例如：`dev/active/dev-docs-optimization/dev-docs-optimization-context.md`

4. **读取 tasks.md** - 根据 ACTIVE_TASK.md 中的路径读取任务清单
   ```
   📝 读取任务清单 (dev/active/[任务名]/[任务名]-tasks.md)...
   ```
   - 使用完整的文件路径
   - 例如：`dev/active/dev-docs-optimization/dev-docs-optimization-tasks.md`

5. **总结状态** - 显示任务进度和下一步
   ```
   📊 任务状态：
      - 完成度: XX%
      - 上次更新: YYYY-MM-DD
      - 当前进度: [简要说明]
   ```

6. **开始工作** - 根据上下文继续任务
   ```
   ✨ 准备就绪，继续工作...
   ```

**关键**：
- 每个步骤都要有可视化输出，使用 emoji 和清晰的格式
- 使用 Read 工具时必须提供完整的文件路径
- 先读取 ACTIVE_TASK.md 获取任务信息，再读取其他文件

---

## Claude Workflow 预设规范

1. **方案先行**: 在编写任何代码之前,请先描述你的方案并等待批准。如果需求不明确,在编写任何代码之前务必提出澄清问题。

2. **任务分解**: 如果一项任务需要修改超过 3 个文件,请先停下来,将其分解成更小的任务。

3. **测试驱动**: 编写代码后,列出可能出现的问题,并建议相应的测试用例来覆盖这些问题。

4. **Bug 修复流程**: 当发现 bug 时,首先要编写一个能够重现该 bug 的测试,然后不断修复它,直到测试通过为止。

5. **持续改进**: 每次我纠正你之后,就在 CLAUDE.md 文件中添加一条新规则,这样就不会再发生这种情况了。

## 🔄 如何恢复工作

### 当你开始新的会话时

1. **检查活跃任务**: 读取 `.claude/ACTIVE_TASK.md`
2. **按照指引读取相关文档**
3. **根据进度继续工作**

### 触发词

当用户说以下内容时，主动读取 `.claude/ACTIVE_TASK.md`：
- "继续上次的工作" / "继续" / "resume"
- "恢复工作" / "接着做" / "从哪里开始？"
- "读取文档" / "查看任务"

### 恢复流程

1. 读取 `.claude/ACTIVE_TASK.md` 查看当前任务
2. 按照该文件的指引读取相关 dev-docs
3. 根据进度继续工作
<!-- CW_PRESET_END -->

## 项目自定义规范

（在这里添加项目特定的开发规范）
